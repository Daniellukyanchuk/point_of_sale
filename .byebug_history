c
discount
discount.discounted_units_left = discount.discounted_units_left + rd.discounted_qt
discount
discount = ClientDiscount.where("id = ?", rd.client_discount_id).first
c
units_left
c
OrderProduct.where(order_id: ord_1.id)
op
c
OrderProducts.where(order_id: ord_1.id)
op
c
OrderProduts.where(order_id: ord_1.id)c\
OrderProduts.where(order_id: ord_1.id)
op
c
cc
Order.find(78)c
Order.find(78)
ord_1
Order.destroy(ord_1.id)
ord_1
rd
c
order1 = Order.find(ord_1.id)
Order.destroy(order1)
order1
order1 = Order.find(ord_1.id)
Order.find(ord_1.id)
ord_1.id
ord_1.client
ord_1.id
ord_1
c
rd
c
dc
d
d.discounted_units_left
d
c
d
d.discounted_units_left
c
OrderProductDiscount.first
c
self.order_product_discounts.first
self
c
self
c
self.order_product_discounts.first
self.order_product_discounts
self
c
d.order_product_discounts.first
d.order_product_discounts
d
c
d
c
amount_discounted
amout_discounted_per_unit
self.sale_price
quantity
amount_to_remove
c
client_discount1.id
id
ord1_id
amount_to_remove
self
discounted_qt
d.order_product_discounts
c
amount_left_to_remove
d
amount_to_remove
amount_discounted
c
amount_left_to_remove
amount_to_remove
c
arr
c
piv_val
right
left
c
right
left
arr
c
arr
left
right
piv_val
c
piv_val
right
left
arr
left
right
c
right
left
c
left
right
arr
right
left
piv_val
c
piv_val
arr
left
right
c
left
right
c
right
left
c
left
right
piv_val
right
left
arr
c
right
left
arr
c
right
left
c
right
left
arr
c
arr
left
right
arr
c
arr
left
piv_val
piv_value
right
left
arr
c
piv_value
right
left
arr
right
left
c
left
right
c
right
left
arr
c
arr
left
right
c
left
right
arr
exit
right
c
left
right
arr
c
arr
left
right
c
arr
left
right
c
exit
exiy
right
left
arr
right
c
right
c
right
c
right
c
right
c
arr
right
left
c
arr
left
right
c
right
left
arr
c
arr
c
left
right
arr
c
arr
left
right
arr
c
arr
left
right
c
arr
c
arr
c
arr
c
right
left
arr
c
right
left
arr
c
exit
arr
c
arr
c
