c
old_order_product.first.order_product_discounts
old_order_product.first
old_order_product
self
old_order_product.order_product_discounts
old_order_product
order_product_discounts
self
order.client.client_discounts
order.client
order.clients
order
old_order_product.order_product_discounts
old_order_product
old_order_product.order_product_discounts
old_order_product
c
ord_1.order_products.first.id
ord_1.order_products.first
ord_1.order_products
ord_1
order
c
ord_1.id
c
Order.find(16)
OrderProduct.where("order_id = ?", 16).first
OrderProduct.where("order_id = 16").first
self
order_product
order
id
old_order_product
c
order.id
order
id
self
OrderProduct.find(id)
id
c
updated_order_product.order
updated_order_product
self
order
Order
self
c
self
c
updated_order_product.save
self.new(updated_order_product.to_json)
self.new(updated_order_product.to_hash)
self.new(updated_order_product.to_h)
self
self.new(updated_order_product)
self.push(updated_order_product)
order_products.push(updated_order_product)
updated_order_product
updated_order_params
self
c
self
c
self
c
updated_order_product
c
updated_order_product
c
rd
c
sc
self
c
self
c
self.order_products.first
self
order
self
c
self
c
self
rd
c
op
rd
c
sale_price
amount_discounted_per_unit
self.sale_price
c
self
c
self
sale_price
self.subtotal
self.sale_price
self
updated_order_product
c
updated_order_product
c
updated_order_product
update_order_product
c
op
order_product
self
params
c
updated_order_product
c
old_order_product
updated_order_product
updated_order_prodcut
c
oop
c
op
rd
op
c
rd
c
op
rd
rd.first
rd[1]
rd[0]
rd
op.first
op.first.quantity
op.quantity
op
op.first
rd
c
opc
op
op.first
op
c
discount
discount.discounted_units_left = discount.discounted_units_left + rd.discounted_qt
discount
discount = ClientDiscount.where("id = ?", rd.client_discount_id).first
c
units_left
c
OrderProduct.where(order_id: ord_1.id)
op
c
OrderProducts.where(order_id: ord_1.id)
op
c
OrderProduts.where(order_id: ord_1.id)c\
OrderProduts.where(order_id: ord_1.id)
op
c
cc
Order.find(78)c
Order.find(78)
ord_1
Order.destroy(ord_1.id)
ord_1
rd
c
order1 = Order.find(ord_1.id)
Order.destroy(order1)
order1
order1 = Order.find(ord_1.id)
Order.find(ord_1.id)
ord_1.id
ord_1.client
ord_1.id
ord_1
c
rd
c
dc
d
d.discounted_units_left
d
c
d
d.discounted_units_left
c
OrderProductDiscount.first
c
self.order_product_discounts.first
self
c
self
c
self.order_product_discounts.first
self.order_product_discounts
self
c
d.order_product_discounts.first
d.order_product_discounts
d
c
d
c
amount_discounted
amout_discounted_per_unit
self.sale_price
quantity
amount_to_remove
c
client_discount1.id
id
ord1_id
amount_to_remove
self
discounted_qt
d.order_product_discounts
c
amount_left_to_remove
d
amount_to_remove
amount_discounted
c
amount_left_to_remove
amount_to_remove
c
arr
c
piv_val
right
left
c
right
left
arr
c
arr
left
right
piv_val
c
piv_val
right
left
arr
left
right
c
right
left
c
left
