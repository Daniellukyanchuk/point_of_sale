<p id="notice"><%= notice %></p>

<h1><%= _('Purchases') %></h1>

<%= link_to _('+ New Purchase Order'), new_purchase_path, :class => "btn btn-secondary" %>
<br><br>

<table>
  <thead>
    <tr>
      <th class="col-1"><%= sortable "id", _("ID") %></th>
      <th class="col-2"><%= sortable "created_at", _("Date Received") %></th>
      <th class="col-2"><%= sortable "supplier_id", _("Supplier ID") %></th>
      <th class="col-3"><%= sortable "supplier_id", _("Supplier Name") %></th>
      <th class="align_right col-2"><%= sortable "purchase_total", _("Purchase Total") %></th>
      <th colspan="5"></th>
    </tr>
  </thead>

  <tbody>
  <% @purchases .each do |purchase| %>
    <tr>
      <td class="col-1"><%= purchase.id %></td>
      <td class="col-2"><%= purchase.created_at.strftime("%d %b %Y") %></td> 
      <td class="col-2"><%= purchase.supplier_id %></td>
      <td class="col-3"><%= purchase.supplier.supplier_name %></td>
      <td class="align_right col-2"><%= number_with_precision(purchase.purchase_total, precision: 2, separator: '.', delimiter: ' ') %></td>
      <td class="col-2">
        <%= link_to '<i class="fa-solid fa-eye"></i>'.html_safe, "/purchases/#{purchase["id"]}", class: "text-primary m-2" %>
        <%= link_to '<i class="fa-solid fa-pencil"></i>'.html_safe, edit_purchase_path(purchase), class: "text-secondary m-2" %>
        <%= link_to '<i class="fa-solid fa-trash-can"></i>'.html_safe, "/purchases/#{purchase["id"]}", method: :delete, data: { confirm: 'Are you sure?' }, class: "text-danger m-2" %>
      </td>
      
    </tr>
  <% end %>
  </tbody>
</table>

<br>

