<p id="notice"><%= notice %></p>

<h1>Users</h1>

<%= link_to _('+ New User'), new_user_path, class: "btn btn-secondary" %><br><br>

<table>
  <thead>
    <tr>
      <th><%= _("User name") %></th>
      <th><%= _("Email") %></th>
      <th><%= _("Role(s)") %></th>
      <th><%= _("Stripe Id")%></th>
      <th colspan="4"></th>
    </tr>
  </thead>
  
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.user_name %></td>
        <td><%= user.email %></td>
        <td><%= role_names = []
                user.roles.each do |rn| 
                  role_names.push(rn.role_name) 
                end 
              
              role_names.join(', ') %></td>
        <td><%= user.stripe_customer_id %></td>
        <td>
          <%= link_to '<i class="fa-solid fa-pencil"></i>'.html_safe, edit_user_path(user), class: "text-secondary m-2" %>
          <%= link_to '<i class="fa-solid fa-trash-can"></i>'.html_safe, user, method: :delete, data: { confirm: 'Are you sure?' }, class: "text-danger m-2" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>


