<p id="notice"><%= notice %></p>

<h1>Inventory Records</h1>

<hr>
<%= link_to '+ Add to Inventory', new_inventory_path, :class => "button big_button green" %>
<br><br>

<%= form_tag reports_inventory_report_path, :method => 'get' do %>
  
  <%= text_field_tag :search, params[:search] %> 
  AND
  <% options = Product.all.collect{ |p| [p.product_name, p.id] } %>
  <% options = [["Show All", nil]] + options %>
  <%= select_tag 'product_select[]', options_for_select(options, params[:product_select]), :multiple => :multiple, :size => 10, :class => "chosen-select" %>
  <br><br>

      From: <input type="text" class="datepicker" id="from" name="from_date" 
              autocomplete = 'off' value = "<%= params[:from_date] %>">
      to: <input type="text" class="datepicker" id="to" name="to_date" 
              autocomplete = 'off' value = "<%= params[:to_date] %>">

  <%= submit_tag "Search", :product_name => nil %>
<% end %>

<br>
<h2> Inventory Summary </h2>
<table>
  <thead>
    <tr>
    <th class="align_left"><%= sortable "product_id", "Id" %></th>
    <th class="align_left"><%= sortable "product_name", "Product Name" %></th>
    <th class="align_right"><%= sortable "current_inventory", "Units in Stock" %></th>
    <th><%= sortable "unit", "Units" %></th>
    <th colspan="4"></th>
    </tr>
  </thead>

<table>
  <thead>
    <tr>
      <th>Product Name</th>
      <th align="right">Remaining Qty</th>
      <th>Inventory Id</th>
      <th>Product Id</th>
      <th>Production Id</th>
      <th>Purchase Id</th>
      <th>P.O. Product Id</th>
      <th>Date added</th>
      <th colspan="6"></th>
    </tr>
  </thead>

  <tbody>
    <% @inventories.each do |inventory| %>
      <% next if inventory.product.nil? %>
      <tr>
        <td><%= inventory.product.product_name %></td>
        <td align="right"><%= inventory.remaining_quantity %> <%= inventory.product.unit %></td>
        <td align="center"><%= inventory.id %></td>
        <td align="center"><%= inventory.product_id %></td>
        <td align="center"><%= inventory.production_id %></td>
        <td align="center"><%= inventory.purchase_id %></td>
        <td align="center"><%= inventory.purchase_product_id %></td>
        <td align="center"><%= inventory.created_at.strftime("%d %b %Y") %></td>

        <td><%= link_to 'Show', inventory, class: "show" %></td>
        <td><%= link_to 'Edit', edit_inventory_path(inventory), class: "edit" %></td>
        <td><%= link_to 'Destroy', inventory, method: :delete, data: { confirm: 'Are you sure?' }, class: "destroy" %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>



