<%= form_with(model: supply, id: "new-supply",  local: true) do |form| %>
  <% if supply.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(order.errors.count, "error") %> prohibited this order from being saved:</h2>

    <ul>
    <% order.errors.full_messages.each do |message| %>
      <li><%= message %></li>
    <% end %>
    </ul>
  </div>
<% end %>


<%= form.label "Select supplier" %>
  <%= form.collection_select :supplier_id, Supplier.all, :id, :supplier_name %>
</div><br><br>

<h2>Products</h2><hr>

    <%= form.fields_for :supply_products do |builder| %>
      <%= render 'supply_product_fields', form: builder %>
    <% end %>
</div>
<div class="inline"> 
    <%= link_to_add_fields "Add Product", form, :supply_products %>
</div>
<br>
<div class="field">
  <%= form.label :purchase_total %>
  <%= form.text_field :purchase_total, :class => "greyed_out", :readonly => true %>
</div>

<div class="actions"> 
  <%= form.submit %>
  </div>
<% end %>


